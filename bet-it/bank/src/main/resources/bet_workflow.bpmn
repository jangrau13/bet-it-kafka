<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0bnwgm1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.9.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <bpmn:process id="Process_06vpn3w" name="Create Contract Workflow" isExecutable="true">
    <bpmn:startEvent id="Bet_Request_Received" name="Bet Request Received">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=&#34;Lukas&#34;" target="from" />
          <zeebe:output source="=&#34;goodGame&#34;" target="gameId" />
          <zeebe:output source="=&#34;Jan&#34;" target="to" />
          <zeebe:output source="=100" target="amount" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_0ciu4mc</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sendTask id="Activity_1drxn3p" name="Send Bet Accepted">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;bet_accepted&#34;" target="topic" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_15pkcoc</bpmn:incoming>
      <bpmn:outgoing>Flow_0ficx4x</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:endEvent id="Event_0cvwf93">
      <bpmn:incoming>Flow_1iw79pm</bpmn:incoming>
      <bpmn:incoming>Flow_1ds15cf</bpmn:incoming>
      <bpmn:incoming>Flow_0rtdojk</bpmn:incoming>
      <bpmn:terminateEventDefinition id="TerminateEventDefinition_0lhoyeb" />
    </bpmn:endEvent>
    <bpmn:intermediateCatchEvent id="Event_1hloh0u" name="Command Style, was it really sent?">
      <bpmn:incoming>Flow_0ficx4x</bpmn:incoming>
      <bpmn:outgoing>Flow_05xwzrh</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1qbq8ly" messageRef="Message_0t28gf2" />
    </bpmn:intermediateCatchEvent>
    <bpmn:serviceTask id="Activity_0bpvip4" name="get UUID">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="uuid-creator" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0ciu4mc</bpmn:incoming>
      <bpmn:outgoing>Flow_0rqinxm</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0ficx4x" sourceRef="Activity_1drxn3p" targetRef="Event_1hloh0u" />
    <bpmn:serviceTask id="Activity_0xj210d" name="Call Game Manager">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="get" target="method" />
          <zeebe:input source="=&#34;http://game-master:8083/gamemanagement/check?gameId=&#34; + gameId" target="url" />
          <zeebe:input source="20" target="connectionTimeoutInSeconds" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultVariable" value="test" />
          <zeebe:header key="resultExpression" value="=response" />
          <zeebe:header key="errorExpression" value="=if error.code = &#34;500&#34; then bpmnError(&#34;500&#34;, &#34;no more retries&#34;) else if error.code = &#34;404&#34; then bpmnError(&#34;500&#34;, &#34;no more retries&#34;) else null" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0q9mqny</bpmn:incoming>
      <bpmn:outgoing>Flow_0x8b5c8</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sendTask id="Activity_19fnxqb" name="Send Game Management Down">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;camunda.contract_rejected&#34;" target="topic" />
          <zeebe:input source="=&#34;Game Management not available, until this is back, the game is over. We are sorry&#34;" target="reason" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1gkytus</bpmn:incoming>
    </bpmn:sendTask>
    <bpmn:exclusiveGateway id="Gateway_0fq6xwm" name="is the game still on?" default="Flow_0vgpa9h">
      <bpmn:incoming>Flow_0x8b5c8</bpmn:incoming>
      <bpmn:outgoing>Flow_15pkcoc</bpmn:outgoing>
      <bpmn:outgoing>Flow_0vgpa9h</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sendTask id="Activity_1ltji98" name="Game is already over">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;camunda.contract_rejected&#34;" target="topic" />
          <zeebe:input source="=&#34;Game is already over. We are sorry&#34;" target="reason" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1d3rrpd</bpmn:incoming>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="Flow_0x8b5c8" sourceRef="Activity_0xj210d" targetRef="Gateway_0fq6xwm" />
    <bpmn:sequenceFlow id="Flow_15pkcoc" name="yes" sourceRef="Gateway_0fq6xwm" targetRef="Activity_1drxn3p">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=body = true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0vgpa9h" name="no" sourceRef="Gateway_0fq6xwm" targetRef="Gateway_0hzd0iz" />
    <bpmn:intermediateCatchEvent id="Event_1qil76h" name="freeze successful">
      <bpmn:incoming>Flow_1m6l7jp</bpmn:incoming>
      <bpmn:outgoing>Flow_0q9mqny</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1h1fp31" messageRef="Message_3mnkomi" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0q9mqny" sourceRef="Event_1qil76h" targetRef="Activity_0xj210d" />
    <bpmn:sendTask id="Activity_0y22j0u" name="Send Freeze Request">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;bank.freeze_request&#34;" target="topic" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0rqinxm</bpmn:incoming>
      <bpmn:outgoing>Flow_187yyjn</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="Flow_187yyjn" sourceRef="Activity_0y22j0u" targetRef="Gateway_1420xye" />
    <bpmn:sequenceFlow id="Flow_0ciu4mc" sourceRef="Bet_Request_Received" targetRef="Activity_0bpvip4" />
    <bpmn:sequenceFlow id="Flow_0rqinxm" sourceRef="Activity_0bpvip4" targetRef="Activity_0y22j0u" />
    <bpmn:sequenceFlow id="Flow_1m6l7jp" sourceRef="Gateway_1420xye" targetRef="Event_1qil76h" />
    <bpmn:parallelGateway id="Gateway_1420xye">
      <bpmn:incoming>Flow_187yyjn</bpmn:incoming>
      <bpmn:outgoing>Flow_1m6l7jp</bpmn:outgoing>
      <bpmn:outgoing>Flow_1de831e</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:intermediateCatchEvent id="Event_124c2dd" name="freeze failed">
      <bpmn:incoming>Flow_1de831e</bpmn:incoming>
      <bpmn:outgoing>Flow_0gqq7od</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1f1hy7y" messageRef="Message_3mnkomi" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_1de831e" sourceRef="Gateway_1420xye" targetRef="Event_124c2dd" />
    <bpmn:sendTask id="Activity_15kke9b" name="Freeze failed">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;camunda.freeze_rejected&#34;" target="topic" />
          <zeebe:input source="=&#34;Get more money my friends&#34;" target="reason" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0cns46h</bpmn:incoming>
      <bpmn:outgoing>Flow_1iw79pm</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="Flow_0gqq7od" sourceRef="Event_124c2dd" targetRef="Gateway_0zqofkc" />
    <bpmn:sequenceFlow id="Flow_1iw79pm" sourceRef="Activity_15kke9b" targetRef="Event_0cvwf93" />
    <bpmn:sequenceFlow id="Flow_1d3rrpd" sourceRef="Gateway_0hzd0iz" targetRef="Activity_1ltji98" />
    <bpmn:sendTask id="Activity_1f0ir1w" name="Send Freeze Compensation Request">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;bank.freeze_request&#34;" target="topic" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0al2w38</bpmn:incoming>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="Flow_0al2w38" sourceRef="Gateway_0hzd0iz" targetRef="Activity_1f0ir1w" />
    <bpmn:parallelGateway id="Gateway_0hzd0iz">
      <bpmn:incoming>Flow_0vgpa9h</bpmn:incoming>
      <bpmn:outgoing>Flow_1d3rrpd</bpmn:outgoing>
      <bpmn:outgoing>Flow_0al2w38</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:boundaryEvent id="Event_0txkzot" attachedToRef="Activity_0xj210d">
      <bpmn:outgoing>Flow_1gkytus</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1qw0c4x" errorRef="Error_0q43gf6" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1gkytus" sourceRef="Event_0txkzot" targetRef="Activity_19fnxqb" />
    <bpmn:sequenceFlow id="Flow_0cns46h" sourceRef="Gateway_0zqofkc" targetRef="Activity_15kke9b" />
    <bpmn:parallelGateway id="Gateway_0zqofkc">
      <bpmn:incoming>Flow_0gqq7od</bpmn:incoming>
      <bpmn:outgoing>Flow_0cns46h</bpmn:outgoing>
      <bpmn:outgoing>Flow_1rq87d3</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:sendTask id="Activity_0ln7m61" name="Bet Rejected">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;bet_rejected&#34;" target="topic" />
          <zeebe:input source="=&#34;Get more money my friends&#34;" target="reason" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1rq87d3</bpmn:incoming>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="Flow_1rq87d3" sourceRef="Gateway_0zqofkc" targetRef="Activity_0ln7m61" />
    <bpmn:serviceTask id="Activity_0ylqli1" name="Call Bank to Pay">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="get" target="method" />
          <zeebe:input source="=&#34;http://bank:8081/bank/payment?from=&#34; + from + &#34;&#38;to=&#34; + to+ &#34;&#38;amount=&#34; + amount" target="url" />
          <zeebe:input source="20" target="connectionTimeoutInSeconds" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultVariable" value="test" />
          <zeebe:header key="resultExpression" value="=response" />
          <zeebe:header key="errorExpression" value="=if error.code = &#34;500&#34; then bpmnError(&#34;500&#34;, &#34;no more retries&#34;) else if error.code = &#34;404&#34; then bpmnError(&#34;500&#34;, &#34;no more retries&#34;) else null" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_05xwzrh</bpmn:incoming>
      <bpmn:outgoing>Flow_1u1kvfb</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sendTask id="Activity_0sruqwh" name="Bank is down">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;camunda.payment_outstanding&#34;" target="topic" />
          <zeebe:input source="=&#34;bank is down&#34;" target="reason" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_112n1jh</bpmn:incoming>
      <bpmn:outgoing>Flow_0a7bp7z</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:boundaryEvent id="Event_08tp5rr" attachedToRef="Activity_0ylqli1">
      <bpmn:outgoing>Flow_112n1jh</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0yo8jvg" errorRef="Error_0q43gf6" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_112n1jh" sourceRef="Event_08tp5rr" targetRef="Activity_0sruqwh" />
    <bpmn:sequenceFlow id="Flow_05xwzrh" sourceRef="Event_1hloh0u" targetRef="Activity_0ylqli1" />
    <bpmn:intermediateCatchEvent id="Event_0ba7kid" name="Payment finally done">
      <bpmn:incoming>Flow_0a7bp7z</bpmn:incoming>
      <bpmn:outgoing>Flow_06domme</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_11ag1ct" messageRef="Message_0t28gf2" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0a7bp7z" sourceRef="Activity_0sruqwh" targetRef="Event_0ba7kid" />
    <bpmn:sequenceFlow id="Flow_1u1kvfb" sourceRef="Activity_0ylqli1" targetRef="Gateway_0jhgtsp" />
    <bpmn:eventBasedGateway id="Gateway_0jhgtsp" name="maybe we can detect fraud?">
      <bpmn:incoming>Flow_1u1kvfb</bpmn:incoming>
      <bpmn:incoming>Flow_06domme</bpmn:incoming>
      <bpmn:outgoing>Flow_1mes0rf</bpmn:outgoing>
      <bpmn:outgoing>Flow_0iw2a87</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateCatchEvent id="Event_1pnpr9s">
      <bpmn:incoming>Flow_1mes0rf</bpmn:incoming>
      <bpmn:outgoing>Flow_02f22xd</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1p5s2l3" messageRef="Message_3714ejd" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_1mes0rf" name="yes" sourceRef="Gateway_0jhgtsp" targetRef="Event_1pnpr9s" />
    <bpmn:intermediateCatchEvent id="Event_06elfpv" name="No fraud detected">
      <bpmn:incoming>Flow_0iw2a87</bpmn:incoming>
      <bpmn:outgoing>Flow_1ds15cf</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_10887fb">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT5M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0iw2a87" sourceRef="Gateway_0jhgtsp" targetRef="Event_06elfpv" />
    <bpmn:serviceTask id="Activity_0b9221e" name="Compensate Payment">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="get" target="method" />
          <zeebe:input source="=&#34;http://bank:8081/bank/paymentReverse?from=&#34; + from + &#34;&#38;to=&#34; + to+ &#34;&#38;amount=&#34; + amount" target="url" />
          <zeebe:input source="20" target="connectionTimeoutInSeconds" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultVariable" value="test" />
          <zeebe:header key="resultExpression" value="=response" />
          <zeebe:header key="errorExpression" value="=bpmnError(&#34;500&#34;, &#34;no more retries&#34;)" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_02f22xd</bpmn:incoming>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_1ksrorr" attachedToRef="Activity_0b9221e">
      <bpmn:outgoing>Flow_05f1vq3</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_11j8gjd" errorRef="Error_0q43gf6" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_02f22xd" sourceRef="Event_1pnpr9s" targetRef="Activity_0b9221e" />
    <bpmn:sequenceFlow id="Flow_1ds15cf" sourceRef="Event_06elfpv" targetRef="Event_0cvwf93" />
    <bpmn:sendTask id="Activity_02ljwbi" name="Bank is down for reverse payment">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-to-kafka" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;camunda.reverse_payment_outstanding&#34;" target="topic" />
          <zeebe:input source="=&#34;bank is down&#34;" target="reason" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_05f1vq3</bpmn:incoming>
      <bpmn:outgoing>Flow_05dta9o</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="Flow_06domme" sourceRef="Event_0ba7kid" targetRef="Gateway_0jhgtsp" />
    <bpmn:sequenceFlow id="Flow_05f1vq3" sourceRef="Event_1ksrorr" targetRef="Activity_02ljwbi" />
    <bpmn:intermediateCatchEvent id="Event_053d187" name="Payment finally done">
      <bpmn:incoming>Flow_05dta9o</bpmn:incoming>
      <bpmn:outgoing>Flow_0rtdojk</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_12nuk0u" messageRef="Message_0t28gf2" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_05dta9o" sourceRef="Activity_02ljwbi" targetRef="Event_053d187" />
    <bpmn:sequenceFlow id="Flow_0rtdojk" sourceRef="Event_053d187" targetRef="Event_0cvwf93" />
    <bpmn:textAnnotation id="TextAnnotation_0nucno8">
      <bpmn:text>change output and type as soon as it is done</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_06nmxzp" sourceRef="Bet_Request_Received" targetRef="TextAnnotation_0nucno8" />
    <bpmn:textAnnotation id="TextAnnotation_0n2vjy8">
      <bpmn:text>change topic to "camunda.contract_accepted". Now it is at camunda for testing reasons</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1nli50w" sourceRef="Activity_1drxn3p" targetRef="TextAnnotation_0n2vjy8" />
    <bpmn:textAnnotation id="TextAnnotation_02qv3rk">
      <bpmn:text>change the output gameId when changing to kafka based, then you should use the built-in user</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_0rkgyfn" sourceRef="TextAnnotation_02qv3rk" targetRef="Activity_0xj210d" />
    <bpmn:textAnnotation id="TextAnnotation_09g0trf">
      <bpmn:text>maybe bank should throw error if the freeze is</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:textAnnotation id="TextAnnotation_09mm8hr">
      <bpmn:text>in order to compensate</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1lxgr55" sourceRef="Activity_1f0ir1w" targetRef="TextAnnotation_09mm8hr" />
    <bpmn:textAnnotation id="TextAnnotation_026b7vu">
      <bpmn:text>if bank is down, send it to kafka to retry it when bank is up again</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_16sdulq" sourceRef="Activity_0sruqwh" targetRef="TextAnnotation_026b7vu" />
  </bpmn:process>
  <bpmn:message id="Message_209plgo" name="CONTRACT_REQUEST" />
  <bpmn:message id="Message_0ksclf7" name="=CONTRACT_ACCEPTED">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=correlationId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_3u62evr" name="=&#34;CONTRACT_ACCEPTED&#34;">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=correlationId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_11ih5m1" name="=CONTRACT_ACCEPTED">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=correlationId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_3mnkomi" name="FREEZE_REJECTED">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=correlationId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:error id="Error_0q43gf6" name="no more retries" errorCode="500" />
  <bpmn:message id="Message_0t28gf2" name="REVERSE_PAYMENT_DONE">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=correlationId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_3714ejd" name="FRAUD_DETECTED">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=correlationId" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_06vpn3w">
      <bpmndi:BPMNShape id="Event_1l4sybz_di" bpmnElement="Bet_Request_Received">
        <dc:Bounds x="179" y="369" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="167" y="412" width="62" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0buj3im_di" bpmnElement="Activity_1drxn3p">
        <dc:Bounds x="1150" y="210" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_00we54k_di" bpmnElement="Event_0cvwf93">
        <dc:Bounds x="2462" y="462" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1l71z0j_di" bpmnElement="Event_1hloh0u">
        <dc:Bounds x="1372" y="222" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1349" y="265" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_05gfd2f_di" bpmnElement="Activity_0bpvip4">
        <dc:Bounds x="320" y="347" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_06c5mbf" bpmnElement="Activity_0xj210d">
        <dc:Bounds x="1020" y="630" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_11kyozu" bpmnElement="Activity_19fnxqb">
        <dc:Bounds x="1080" y="840" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0paopsw" bpmnElement="Gateway_0fq6xwm" isMarkerVisible="true">
        <dc:Bounds x="1185" y="645" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1175" y="702" width="77" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1uivcd2" bpmnElement="Activity_1ltji98">
        <dc:Bounds x="1420" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_18h69x6" bpmnElement="Event_1qil76h">
        <dc:Bounds x="732" y="277" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="712" y="320" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1yxlz4t" bpmnElement="Activity_0y22j0u">
        <dc:Bounds x="510" y="347" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1qy2sm5_di" bpmnElement="Gateway_1420xye">
        <dc:Bounds x="645" y="362" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1wen5i9" bpmnElement="Event_124c2dd">
        <dc:Bounds x="732" y="422" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="726" y="465" width="59" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1vhzvoj" bpmnElement="Activity_15kke9b">
        <dc:Bounds x="940" y="290" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1hasfzp" bpmnElement="Activity_1f0ir1w">
        <dc:Bounds x="1440" y="740" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0ken77s_di" bpmnElement="Gateway_0hzd0iz">
        <dc:Bounds x="1355" y="645" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1t7vbo7_di" bpmnElement="Gateway_0zqofkc">
        <dc:Bounds x="865" y="415" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0dd568u" bpmnElement="Activity_0ln7m61">
        <dc:Bounds x="950" y="460" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1gvgk9i" bpmnElement="Activity_0ylqli1">
        <dc:Bounds x="1640" y="200" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0ld5nb8" bpmnElement="Activity_0sruqwh">
        <dc:Bounds x="1710" y="540" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1avnbfa" bpmnElement="Event_0ba7kid">
        <dc:Bounds x="1772" y="682" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1755" y="725" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1b8lzxy_di" bpmnElement="Gateway_0jhgtsp">
        <dc:Bounds x="1935" y="205" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1926" y="168" width="71" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1pnpr9s_di" bpmnElement="Event_1pnpr9s">
        <dc:Bounds x="2182" y="212" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_06elfpv_di" bpmnElement="Event_06elfpv">
        <dc:Bounds x="2182" y="322" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2158" y="365" width="88" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_15hmmpq" bpmnElement="Activity_0b9221e">
        <dc:Bounds x="2410" y="180" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1omq5io" bpmnElement="Activity_02ljwbi">
        <dc:Bounds x="2570" y="314" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1fi02vp" bpmnElement="Event_053d187">
        <dc:Bounds x="2642" y="492" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2622" y="537.5" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0nucno8_di" bpmnElement="TextAnnotation_0nucno8">
        <dc:Bounds x="220" y="100" width="100" height="70" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0n2vjy8_di" bpmnElement="TextAnnotation_0n2vjy8">
        <dc:Bounds x="920" y="80" width="100" height="98" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0xb6age" bpmnElement="TextAnnotation_02qv3rk">
        <dc:Bounds x="820" y="700" width="99.99274099883856" height="112.65969802555169" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_09g0trf_di" bpmnElement="TextAnnotation_09g0trf">
        <dc:Bounds x="440" y="260" width="100" height="70" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_09mm8hr_di" bpmnElement="TextAnnotation_09mm8hr">
        <dc:Bounds x="1500" y="860" width="99.99510188087774" height="40.75235109717868" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_026b7vu_di" bpmnElement="TextAnnotation_026b7vu">
        <dc:Bounds x="1800" y="330" width="99.99510188087774" height="84.63949843260188" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0393rke" bpmnElement="Event_1ksrorr">
        <dc:Bounds x="2442" y="242" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0p8g1sg" bpmnElement="Event_08tp5rr">
        <dc:Bounds x="1672" y="262" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0sfget7" bpmnElement="Event_0txkzot">
        <dc:Bounds x="1052" y="692" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0ficx4x_di" bpmnElement="Flow_0ficx4x">
        <di:waypoint x="1250" y="250" />
        <di:waypoint x="1299" y="250" />
        <di:waypoint x="1299" y="240" />
        <di:waypoint x="1372" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0asaw6o" bpmnElement="Flow_0x8b5c8">
        <di:waypoint x="1120" y="670" />
        <di:waypoint x="1185" y="670" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1efi0dq" bpmnElement="Flow_15pkcoc">
        <di:waypoint x="1210" y="645" />
        <di:waypoint x="1210" y="468" />
        <di:waypoint x="1200" y="468" />
        <di:waypoint x="1200" y="290" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1197" y="477" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_017rq7m" bpmnElement="Flow_0vgpa9h">
        <di:waypoint x="1235" y="670" />
        <di:waypoint x="1355" y="670" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1309" y="652" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q9mqny_di" bpmnElement="Flow_0q9mqny">
        <di:waypoint x="768" y="295" />
        <di:waypoint x="844" y="295" />
        <di:waypoint x="844" y="670" />
        <di:waypoint x="1020" y="670" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_187yyjn_di" bpmnElement="Flow_187yyjn">
        <di:waypoint x="610" y="387" />
        <di:waypoint x="645" y="387" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ciu4mc_di" bpmnElement="Flow_0ciu4mc">
        <di:waypoint x="215" y="387" />
        <di:waypoint x="320" y="387" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rqinxm_di" bpmnElement="Flow_0rqinxm">
        <di:waypoint x="420" y="387" />
        <di:waypoint x="510" y="387" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1m6l7jp_di" bpmnElement="Flow_1m6l7jp">
        <di:waypoint x="670" y="362" />
        <di:waypoint x="670" y="295" />
        <di:waypoint x="732" y="295" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1de831e_di" bpmnElement="Flow_1de831e">
        <di:waypoint x="670" y="412" />
        <di:waypoint x="670" y="440" />
        <di:waypoint x="732" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gqq7od_di" bpmnElement="Flow_0gqq7od">
        <di:waypoint x="768" y="440" />
        <di:waypoint x="865" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1iw79pm_di" bpmnElement="Flow_1iw79pm">
        <di:waypoint x="1040" y="330" />
        <di:waypoint x="1216" y="330" />
        <di:waypoint x="1216" y="480" />
        <di:waypoint x="2462" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1d3rrpd_di" bpmnElement="Flow_1d3rrpd">
        <di:waypoint x="1380" y="645" />
        <di:waypoint x="1380" y="540" />
        <di:waypoint x="1420" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0al2w38_di" bpmnElement="Flow_0al2w38">
        <di:waypoint x="1380" y="695" />
        <di:waypoint x="1380" y="780" />
        <di:waypoint x="1440" y="780" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gkytus_di" bpmnElement="Flow_1gkytus">
        <di:waypoint x="1070" y="728" />
        <di:waypoint x="1070" y="784" />
        <di:waypoint x="1130" y="784" />
        <di:waypoint x="1130" y="840" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0cns46h_di" bpmnElement="Flow_0cns46h">
        <di:waypoint x="890" y="415" />
        <di:waypoint x="890" y="330" />
        <di:waypoint x="940" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rq87d3_di" bpmnElement="Flow_1rq87d3">
        <di:waypoint x="915" y="440" />
        <di:waypoint x="1030" y="440" />
        <di:waypoint x="1030" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_14q9l3h" bpmnElement="Flow_112n1jh">
        <di:waypoint x="1690" y="298" />
        <di:waypoint x="1690" y="354" />
        <di:waypoint x="1760" y="354" />
        <di:waypoint x="1760" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05xwzrh_di" bpmnElement="Flow_05xwzrh">
        <di:waypoint x="1408" y="240" />
        <di:waypoint x="1640" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0a7bp7z_di" bpmnElement="Flow_0a7bp7z">
        <di:waypoint x="1760" y="620" />
        <di:waypoint x="1760" y="651" />
        <di:waypoint x="1790" y="651" />
        <di:waypoint x="1790" y="682" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1u1kvfb_di" bpmnElement="Flow_1u1kvfb">
        <di:waypoint x="1740" y="240" />
        <di:waypoint x="1818" y="240" />
        <di:waypoint x="1818" y="230" />
        <di:waypoint x="1935" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mes0rf_di" bpmnElement="Flow_1mes0rf">
        <di:waypoint x="1985" y="230" />
        <di:waypoint x="2182" y="230" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2075" y="212" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0iw2a87_di" bpmnElement="Flow_0iw2a87">
        <di:waypoint x="1960" y="255" />
        <di:waypoint x="1960" y="340" />
        <di:waypoint x="2182" y="340" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02f22xd_di" bpmnElement="Flow_02f22xd">
        <di:waypoint x="2218" y="230" />
        <di:waypoint x="2314" y="230" />
        <di:waypoint x="2314" y="220" />
        <di:waypoint x="2410" y="220" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ds15cf_di" bpmnElement="Flow_1ds15cf">
        <di:waypoint x="2218" y="340" />
        <di:waypoint x="2340" y="340" />
        <di:waypoint x="2340" y="480" />
        <di:waypoint x="2462" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06domme_di" bpmnElement="Flow_06domme">
        <di:waypoint x="1808" y="700" />
        <di:waypoint x="1960" y="700" />
        <di:waypoint x="1960" y="255" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05f1vq3_di" bpmnElement="Flow_05f1vq3">
        <di:waypoint x="2460" y="278" />
        <di:waypoint x="2460" y="354" />
        <di:waypoint x="2570" y="354" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05dta9o_di" bpmnElement="Flow_05dta9o">
        <di:waypoint x="2620" y="394" />
        <di:waypoint x="2620" y="443" />
        <di:waypoint x="2660" y="443" />
        <di:waypoint x="2660" y="492" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rtdojk_di" bpmnElement="Flow_0rtdojk">
        <di:waypoint x="2642" y="510" />
        <di:waypoint x="2570" y="510" />
        <di:waypoint x="2570" y="480" />
        <di:waypoint x="2498" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_06nmxzp_di" bpmnElement="Association_06nmxzp">
        <di:waypoint x="200" y="370" />
        <di:waypoint x="240" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_1nli50w_di" bpmnElement="Association_1nli50w">
        <di:waypoint x="1151" y="217" />
        <di:waypoint x="1020" y="129" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_0rkgyfn_di" bpmnElement="Association_0rkgyfn">
        <di:waypoint x="920" y="766" />
        <di:waypoint x="1020" y="697" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_1lxgr55_di" bpmnElement="Association_1lxgr55">
        <di:waypoint x="1515" y="820" />
        <di:waypoint x="1541" y="860" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_16sdulq_di" bpmnElement="Association_16sdulq">
        <di:waypoint x="1775" y="540" />
        <di:waypoint x="1823" y="415" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
